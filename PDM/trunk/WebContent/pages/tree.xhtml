<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">
<head />
<body>
<ui:composition template="/WEB-INF/templates/standard.xhtml">
	<ui:define name="head" />

	<ui:define name="content">
		<rich:dragIndicator id="indicator" />
		<rich:dragIndicator id="indicator2" />
		<h:form>
			<table width="150%">
				<tr valign="top">
					<td rowspan="4">
						<rich:panel id="treePanel">
							<f:facet name="header">
								<h:outputText value="Drzewo taksonomii" />
							</f:facet>
							<div id="treeDiv">
								<rich:tree nodeSelectListener="#{treeBean.processSelection}"
									reRender="selectedNode,treePanel" ajaxSubmitSelection="true"
									switchType="client" value="#{treeBean.rootNode}" var="item"
									id="tree" treeNodeVar="treeNodeVar" ajaxKeys="#{null}"
									dropListener="#{treeBean.dropListener}" nodeFace="#{item.face}">
	
									<rich:treeNode type="standard">
										<h:outputText value="#{item.data}" />
										<rich:dragSupport dragIndicator=":indicator" dragType="all"	dragValue="#{item}">
											<rich:dndParam name="label" value="#{item.data}" />
										</rich:dragSupport>
									</rich:treeNode>
									<rich:treeNode type="green">
										<font style="background-color: green;"> 
											<h:outputText value="#{item.data}" />
										</font>
										<rich:dragSupport dragIndicator=":indicator" dragType="all" dragValue="#{item}">
											<rich:dndParam name="label" value="#{item.data}" />
										</rich:dragSupport>
									</rich:treeNode>
									<rich:treeNode type="red">
										<font style="background-color: red;"> 
											<h:outputText value="#{item.data}" /> 
										</font>
										<rich:dragSupport dragIndicator=":indicator" dragType="all" dragValue="#{item}">
											<rich:dndParam name="label" value="#{item.data}" />
										</rich:dragSupport>
									</rich:treeNode>
									<rich:treeNode type="orange">
										<font style="background-color: orange;"> 
											<h:outputText value="#{item.data}" /> 
										</font>
										<rich:dragSupport dragIndicator=":indicator" dragType="all" dragValue="#{item}">
											<rich:dndParam name="label" value="#{item.data}" />
										</rich:dragSupport>
									</rich:treeNode>
								</rich:tree>
							</div>
						</rich:panel>
					</td>
					
					<td>
						<rich:panel id="yesPanel" styleClass="yesNoPanel">
							<f:facet name="header">
								<h:outputText value="Yes" />
							</f:facet>
							<rich:dropSupport id="yesContainer" acceptedTypes="all"
								dropValue="all" dropListener="#{choiceContainer.processYesDrop}"
								reRender="treePanel,yesPanel">
							</rich:dropSupport>
							<h:dataTable id="yesTable" columns="1"
								value="#{choiceContainer.selectedYesContainer}" var="fm">
								<h:column>
									<h:outputText value="#{fm.trace}"></h:outputText>
								</h:column>
							</h:dataTable>
						</rich:panel>
					</td>
					
					<td>
						<rich:panel styleClass="yesNoPanel" id="noPanel">
							<f:facet name="header">
								<h:outputText value="No" />
							</f:facet>
							<rich:dropSupport id="noContainer" acceptedTypes="all"
								dropValue="all" dropListener="#{choiceContainer.processNoDrop}"
								reRender="treePanel,noPanel">
							</rich:dropSupport>
	
							<h:dataTable id="noTable" columns="1"
								value="#{choiceContainer.selectedNoContainer}" var="fm">
								<h:column>
									<h:outputText value="#{fm.trace}"></h:outputText>
								</h:column>
							</h:dataTable>
						</rich:panel>
					</td>
				</tr>
	<style>
		.orange {
			color: #fef4e9;
			border: solid 1px #da7c0c;
			background: #f78d1d;
			background: -webkit-gradient(linear, left top, left bottom, from(#faa51a), to(#f47a20));
			background: -moz-linear-gradient(top,  #faa51a,  #f47a20);
			filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#faa51a', endColorstr='#f47a20');
		}
		.orange:hover {
			background: #f47c20;
			background: -webkit-gradient(linear, left top, left bottom, from(#f88e11), to(#f06015));
			background: -moz-linear-gradient(top,  #f88e11,  #f06015);
			filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#f88e11', endColorstr='#f06015');
		}
		.orange:active {
			color: #fcd3a5;
			background: -webkit-gradient(linear, left top, left bottom, from(#f47a20), to(#faa51a));
			background: -moz-linear-gradient(top,  #f47a20,  #faa51a);
			filter:  progid:DXImageTransform.Microsoft.gradient(startColorstr='#f47a20', endColorstr='#faa51a');
		}
		
		
	</style>
	
				<tr>
					<td valign="top" width="100%" align="center" colspan="2">
						<rich:panel id="selectedNode">
							<f:facet name="header">
								<h:outputText value="Workspace"></h:outputText>
							</f:facet>
							
							<h:panelGrid columns="2">
								<rich:panel>
									<table>
										<tr rowspan="2">
											<a4j:repeat value="#{treeBean.concept.selectedConcept}" var="token">
												<td>
													<a4j:commandButton id="conceptEditing" value="#{token.data}" 
															onmouseover="this.style.backgroundColor='green'"
															onmouseout="this.style.backgroundColor='#{a4jSkin.BackgroundColor}'" 
															reRender="selectedNode,treePanel" styleClass="#{token.face}">
														<f:attribute name="elementName" value="#{token.data}"/>
													</a4j:commandButton>
												</td>
											</a4j:repeat>
										</tr>
									</table>
								</rich:panel>
	
								<rich:panel>
									<a4j:commandButton id="includeBut" value="Include" reRender="ObjectQualifiers, selectedNode, treePanel"/>
									<br/>
									<a4j:commandButton id="excludeBut" value="Exclude" reRender="ObjectQualifiers, selectedNode, treePanel"/>
								</rich:panel>
							</h:panelGrid>	
						</rich:panel>
					</td>
				</tr>
				
				<tr>
					<td valign="top" width="100%" align="center" colspan="2">
						<rich:panel id="ObjectQualifiers">
							<f:facet name="header">Kwalifikatory obiektow</f:facet>
								<table>
									<tr>
										<ui:repeat value="#{treeBean.conceptHistory}" var="hist">
											<td>
												<rich:panel>
													<f:facet name="header">
														<h:outputText value="Object"/>
														<a4j:commandLink id="editHistConcept" reRender="selectedNode">
															Edit
															<f:attribute name="conceptId" value="#{hist.id}"/>												
														</a4j:commandLink>
													</f:facet>
													<ul>
														<ui:repeat value="#{hist.selectedConcept}" var="name">
															<li>#{name.data}</li>
														</ui:repeat>
													</ul>
												</rich:panel>
												<h:outputText value="&lt;/tr&gt;&lt;tr&gt;" escape="false" rendered="#{(hist.index + 1) mod 4 eq 0}"/>
											</td>
										</ui:repeat>
									</tr>
								</table>
						</rich:panel>
					</td>
				</tr>
				
				<tr>
					<td valign="top" width="100%" align="center" colspan="2">
						<rich:panel	id="resultsPanel">
							<div id="resultsDiv">
								<rich:dropSupport id="rP" acceptedTypes="no" />  
								<rich:dataGrid value="#{searchResultDAO.objects}" var="res" columns="5"	width="100%">
									<f:facet name="header">
										<h:outputText value="Wyniki"></h:outputText>
									</f:facet>
									<rich:panel>
										<f:facet name="header">
											<h:outputText value="#{res.title}"></h:outputText>
										</f:facet>
										<rich:effect event="onclick" type="DropOut" params="duration:0.8" />
										 	<h:graphicImage value="#{res.imagePath}" id="result_image"
												alt="There should be an image"></h:graphicImage>  
										<h:outputText value="#{res.description}" />
									</rich:panel>
									<f:facet name="footer">
										<rich:datascroller />
									</f:facet>
								</rich:dataGrid>
							</div>
						</rich:panel>
					</td>
				</tr>
			</table>
		</h:form>
	</ui:define>
</ui:composition>
</body>
</html>